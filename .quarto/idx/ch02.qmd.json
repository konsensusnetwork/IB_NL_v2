{"title":"De tussenpersoon verwijderen","markdown":{"headingText":"De tussenpersoon verwijderen","containsRefs":false,"markdown":"\nIn het vorige hoofdstuk hebben we besproken dat bitcoin een peer-to-peer\nsysteem is voor de overdracht van waarde. Voordat we ingaan op hoe dat\nwerkt, kijken we eerst hoe een traditionele bank of betalingsverwerker\nomgaat met het beheer van eigendom en overdrachten van activa.\n\n## Banken zijn slechts grootboeken\n\nHoe werkt een digitale betaling via de bank, PayPal of ApplePay? Heel\neenvoudig, fungeren deze tussenpersonen als veredelde grootboeken van\nrekeningen en overschrijvingen.\n\nHet doel van een bank is om tegoeden op te slaan en te bewaken. Maar\ntegoeden zijn tegenwoordig voornamelijk elektronisch, in plaats van\nmunten of papier. Als zodanig is het nu de taak van een bank om data te\nbeheren en te bewaken. Omdat de gegevens elektronisch zijn, is de\nbeveiliging ook voornamelijk elektronisch. Banken maken gebruik van\nsoftwarematige inbraakdetectiesystemen, back-ups om te beschermen tegen\ngegevensverlies, audits door derden om er zeker van te zijn dat interne\nprocessen niet in het gedrang komen en ze verzekeren zich uit voorzorg\nvoor het geval er iets misgaat.\n\nHieronder zie je hoe banken werken. In dit voorbeeld hebben we het over\neen bank, maar je kan dit lezen als elke partij die betalingen verwerkt.\nWe beginnen met een grootboek van rekeningen waaruit blijkt dat Alice en\nBob geld hebben gestort bij de bank.\n\nTABEL\n\nWanneer Alice €2 naar Bob wil sturen, belt ze haar bank of gebruikt ze\neen website of mobiele app van haar bank, logt ze in bij de bank met\nbehulp van een gebruikersnaam en wachtwoord of pincode, en doet\nvervolgens het verzoek tot overdracht. De bank registreert dit in hun\ngrootboek.\n\nTABEL\n\nDe bank heeft de credits en debets en bijbehorende tegoeden\ngeregistreerd, en nu is het geld overgedragen.\n\n## Het dubbele-uitgavenprobleem\n\nWat gebeurt er als Alice diezelfde twee dollar nu weer probeert uit te\ngeven? Dit wordt het *dubbele-uitgavenprobleem* genoemd. Zij dient het\nverzoek in bij de bank, maar de bank zegt: \\\"Sorry, we zien dat je die\n€2 al hebt uitgegeven aan Bob. Je kan dat geld niet meer uitgeven.\\\"\n\nWanneer je een centrale autoriteit hebt zoals een bank, is het heel\ngemakkelijk voor de bank om te zien dat je probeert geld uit te geven\ndat je al hebt uitgegeven. Dat komt omdat zij de enigen zijn die het\ngrootboek kunnen wijzigen. Zij beschikken over verschillende interne\nprocessen zoals back-ups en audits, om ervoor te zorgen dat het\ngrootboek correct is en om te zorgen dat er niet mee wordt geknoeid.\n\nWe noemen dit een *gecentraliseerd* systeem omdat het een enkel\ncontrolepunt heeft.\n\n![De bank houdt een grootboek bij waar iedereen toegang toe heeft, maar alleen via de bank bij kan.](images/fig2.png)\n\n\n## Het grootboek delen tussen verschillende partijen\n\nHet eerste probleem dat bitcoin wil oplossen, is het verwijderen van een\ntussenpersoon door het creëren van een *peer-to-peer* systeem. Stel je\nvoor dat banken verdwenen zijn en we ons financiële systeem opnieuw\nmoeten creëren. Hoe kunnen we een grootboek bijhouden zonder centrale\npartij?\n\nAls we niet één centraal grootboek hebben, moet het zo zijn dat het\ngrootboek van het volk is. *Vive la révolution*. Dit is hoe we dat doen.\n\nEerst komen een aantal mensen samen en creëren zij een *netwerk*. Dit\nbetekent simpelweg dat een manier bestaat om informatie met elkaar te\ndelen. Laten we zeggen dat we telefoonnummers of Snapchat-accounts\nuitwisselen. Wanneer Alice geld wil overmaken naar Bob, belt ze niet\nnaar de bank, maar zegt ze tegen al haar vrienden: Ik stuur €2 naar Bob.\nIedereen bevestigt met: Top, we noteren het, en schrijft het in hun\neigen kopie van het grootboek. Het ziet er uit zoals in @fig-figure3.\n\n![Iedereen heeft een eigen kopie van het grootboek, waar ze onafhankelijk van een ander bij kunnen.](images/fig3.png){#fig-figure3}\n\n\nDus nu heeft iedereen (in plaats van enkel de bank) een kopie van het\ngrootboek in handen. Telkens wanneer iemand geld wil uitgeven, vertellen\nze het aan al hun vrienden. Iedereen houdt de transacties bij. Het\ngrootboek staat niet meer op één plek. Dit heet *gedistribueerd*. We\nnoemen we het ook *decentraal*, omdat geen enkele centrale partij het\nvoor het zeggen heeft. Er hoeft geen tussenpersoon meer vertrouwd te\nworden.\n\nNu we geen tussenpersoon hebben, hoe gaan we dan om met dubbele\nuitgaven? Wie of wat kunnen we (in plaats van de bank) raadplegen om na\nte gaan of het geld dat wordt uitgegeven nog niet is uitgegeven? Omdat\niedereen een kopie van het grootboek heeft, moeten we iedereen\nraadplegen. Het systeem zoals we nu bespreken, is *gebaseerd op\nconsensus* omdat er in het netwerk consensus heerst. Iedereen is het\neens over een bepaalde versie van de waarheid.\n\nAls Alice probeert om de €2 die ze al naar Bob heeft gestuurd opnieuw\nuit te geven, zal haar transactie worden afgewezen door iedereen op het\nnetwerk. De leden op het netwerk zullen hun grootboeken raadplegen en\naan Alice vertellen dat het geld al is uitgegeven. Ze zouden haar tweede\ntransactie van diezelfde €2 dus niet opnemen. We hebben nu een\npeer-to-peer consensusnetwerk voor het registreren van eigendom en\noverdrachten van tegoeden.\n\nZolang partijen *toestemming* nodig hebben om deel te mogen nemen aan\nons gedistribueerde grootboek, en we erop kunnen *vertrouwen* dat elke\npartij eerlijk is, werkt het systeem. Maar dit soort ontwerpen kunnen\nniet geschaald worden om door miljoenen mensen van over de hele wereld\nte worden gebruikt. Gedistribueerde systemen bestaande uit willekeurige\ndeelnemers zijn inherent onbetrouwbaar. Sommige mensen gaan af en toe\noffline. Dat betekent dat ze mogelijk niet op de hoogte zijn van onze\ntransacties op het moment dat we die uitsturen. Anderen proberen ons\nmisschien actief te bedriegen door te zeggen dat bepaalde transacties\njuist wel of niet hebben plaatsgevonden. Nieuwe mensen kunnen zich\naansluiten bij het netwerk en zo ontstaan conflicterende kopieën van het\ngrootboek.\n\nIn het volgende deel onderzoeken we hoe iemand zou kunnen proberen om\nvals te spelen.\n\n## De dubbele-uitgaven aanval\n\nAls ik Alice ben, kan ik *samenspannen* met een aantal van de andere\nmensen en hen vertellen: Als ik geld uitgeef, schrijf het dan niet in\njullie grootboek. Doe alsof het nooit gebeurd is. Laten we eens kijken\nhoe Alice zo'n dubbele-uitgaven aanval kan uitvoeren.\n\nBeginnend met een saldo van €2, doet Alice het volgende:\n\n1.  Ze stuurt haar €2 naar Bob, om een reep chocolade te kopen. Nu heeft\n    Alice €0 over.\n\n2.  David, Eva en Femke spannen samen met Alice en schrijven de\n    transactie van Alice naar Bob niet in hun grootboeken. In hun\n    exemplaar heeft Alice haar geld nooit uitgegeven en heeft ze nog\n    steeds een saldo van €2.\n\n3.  Charlotte is een eerlijke grootboekhouder. Ze registreert correct de\n    transactie van Alice naar Bob. In haar grootboek heeft Alice €0.\n\n4.  Henri was een week op vakantie en heeft nog nooit van de transactie\n    gehoord. Hij sluit zich aan bij het netwerk en vraagt om een kopie\n    van het grootboek.\n\n5.  Henri krijgt 4 valse kopieën (David, Eva, Femke en Alice) en één\n    eerlijke kopie (Charlotte). Hoe bepaalt hij welke echt is? Zonder\n    beter systeem vertrouwt hij de meerderheid van deelnemers en wordt\n    dus misleidt. Hij neemt aan dat het nep-grootboek klopt.\n\n6.  Alice koopt een chocoladereep van Henri met de €2 die ze eigenlijk\n    niet heeft. Henri accepteert het omdat voor zo ver hij weet, Alice\n    nog steeds €2 op haar rekening heeft.\n\n7.  Alice heeft nu 2 chocoladerepen en er is €4 aan nepgeld gemaakt in\n    het systeem. Ze betaalt haar vrienden met chocoladerepen, en ze\n    herhalen de aanval 100 keer op elke nieuwe persoon die lid wordt van\n    het netwerk.\n\n8.  Alice heeft nu alle chocoladerepen en alle anderen hebben grote\n    zakken nepgeld gekregen.\n\n9.  Wanneer de verkopers van chocoladerepen het geld willen uitgeven dat\n    Alice ze heeft gestuurd zullen Alice, David, Eva en Femke (die de\n    meerderheid van de netwerk uitmaken) deze uitgaven afwijzen omdat ze\n    weten dat het nepgeld is.\n\nDit wordt een *consensusfout* genoemd. De mensen in het netwerk kwamen\nniet tot consensus over de stand van zaken. Doordat er geen beter\nsysteem voor handen was, werd de meerderheidsregel gehanteerd, wat er\nvoor zorgde dat oneerlijke mensen het netwerk konden bedotten en geld\nkonden uitgeven dat ze eigenlijk niet hadden.\n\nAls we een systeem willen maken dat *zonder toestemming* werkt, waar\niedereen aan kan deelnemen zonder iemand permissie te moeten vragen, dan\nmoet het weerbaar zijn tegen oneerlijke deelnemers.\n\n## Het oplossen van het gedistribueerd consensus probleem\n\nNu komen we bij een van de moeilijkste problemen in de technologie:\nconsensus delen tussen partijen waar sommige oneerlijk of onbetrouwbaar\nzijn. Dit probleem staat bekend als *het probleem van de Byzantijnse\nGeneralen* en de oplossing bleek de sleutel tot succes van Satoshi\nNakamoto's ontdekking. Een heleboel mensen moeten het eens worden over\nde transacties in het grootboek zonder te weten welke grootboekhouders\nalle transacties correct en eerlijk hebben opgeschreven.\n\nEen naïeve oplossing is simpelweg het aanstellen van eerlijke\ngrootboekhouders. In plaats van iedereen het grootboek laten bijhouden,\nkiezen we een handvol vrienden zoals Charlotte, Geert, Frank en Zoe om\nhet te doen, omdat ze geen leugens vertellen en iedereen weet dat ze\nnooit feesten in het weekend.\n\nDus telkens we een transactie willen verwerken, bellen we Charlotte en\nde rest op. Ze zijn blij om het grootboek voor ons bij te houden en\nvragen slechts een kleine vergoeding. Nadat zij de transactie in het\ngrootboek hebben geschreven, bellen ze de anderen om ze op de hoogte te\nbrengen van de wijziging, waarna ook zij die aan het grootboek toevoegen\nals back-up.\n\nDit systeem werkt heel goed, tot op een dag agenten willen weten wie dit\nschaduw financiële systeem draaiende houdt. Ze arresteren Charlotte,\nGeert, Frank en Zoe en nemen hen mee, waardoor een einde komt aan ons\ngedistribueerde grootboek. We hebben allemaal verschillende back-ups,\nkunnen elkaar niet vertrouwen en kunnen niet achterhalen wiens back-up\nmoet worden gebruikt om een nieuw systeem te starten.\n\nIn plaats van een volledige sluiting, zou de overheid onze\ngrootboekhouders ook stilletjes met gevangenisstraffen kunnen bedreigen\nals ze transacties naar Alice accepteren (die verdacht wordt van het\nverkopen van drugs). Het systeem is nu effectief onder centrale controle\nen we kunnen het niet langer noemen.\n\nWat als we democratie proberen? Laten we een groep van 50 eerlijke\nmensen zoeken en we houden dagelijks verkiezingen om te bepalen wie die\ndag het grootboek bij mag houden. Iedereen in het netwerk krijgt een\nstem.\n\nDit systeem werkt geweldig totdat mensen geweld of financiële dwang\ngebruiken om dezelfde doelen te bereiken als voorheen:\n\n1.  Dwing het electoraat om te stemmen op de grootboekhouders van hun\n    keuze.\n\n2.  Dwing de gekozen grootboekhouders om valse vermeldingen in het\n    grootboek te verwerken of juist bepaalde transacties tegen te\n    houden.\n\nWe hebben een probleem. Telkens wanneer we specifieke mensen aanstellen\nom het grootboek bij te houden, moeten we erop vertrouwen dat ze eerlijk\nhandelen. Er is geen enkele manier om hen te verdedigen tegen dwang om\noneerlijk te handelen en het grootboek te corrumperen.\n\n## Valse identiteit en Sybil-aanvallen\n\nTot nu toe hebben we twee mislukte methoden gezien om eerlijkheid te\ngaranderen: de een maakte gebruik van specifieke grootboekhouders en de\nander van democratisch gekozen en roterende grootboekhouders. De zwakte\nvan beide systemen is dat het vertrouwen gekoppeld is aan identiteiten\nuit de reële wereld: er moeten personen worden aangewezen die\nverantwoordelijk zijn voor het grootboek. Wanneer we een systeem\nhanteren waar vertrouwen afhankelijk is van identiteit, lopen we kans op\neen zogeheten *Sybil-aanval*. Dit is eigenlijk een mooie naam voor\nimitatie. Het houdt in dat iemand zich voordoet als een ander en is\nvernoemd naar een vrouw met een meervoudige persoonlijkheidsstoornis.\n\nHeb je ooit een rare SMS ontvangen van een van je vrienden, waarna bleek\ndat zijn telefoon(nummer) was *gehackt*? Als het om miljarden of zelfs\nbiljoenen dollars gaat, zullen mensen allerlei vormen van geweld\nrechtvaardigen om die telefoon te stelen en die SMS te versturen. Het is\nabsoluut noodzakelijk dat we voorkomen dat de mensen die het grootboek\nbijhouden, op welke manier dan ook, tot zaken gedwongen kunnen worden.\nMaar hoe doen we dat?\n\n## We starten een loterij\n\nAls we niet willen dat mensen worden beïnvloed door dreigementen met\ngeweld of omkoping, hebben we een systeem nodig met zoveel\ngrootboekhouders dat het onhaalbaar is om ze te dwingen. Of nog beter;\nwe willen dat hun identiteit geheim blijft. Het moet zo zijn dat\niedereen aan ons systeem kan deelnemen en dat we niet afhankelijk zijn\nvan een vorm van stemmen, omdat zo'n systeem gevoelig is voor omkoping\nof afpersing.\n\nWat als we een loterij gebruiken waarbij telkens een willekeurige\npersoon wordt gekozen om in het grootboek te schrijven? Hier is het\neerste ontwerp:\n\n1.  Iedereen ter wereld kan meedoen. Tienduizenden mensen kunnen lid\n    worden van de grootboekhouderloterij.\n\n2.  Wanneer we geld willen overmaken vertellen we het gehele netwerk\n    over de transacties die we willen uitvoeren, net zoals we hiervoor\n    deden.\n\n3.  In plaats van iedereen de transacties te laten opschrijven, houden\n    we een loterij om te zien wie het recht wint om de transacties in\n    het grootboek te schrijven.\n\n4.  Wanneer we een winnaar selecteren, mag die persoon alle transacties\n    in het grootboek schrijven die bij hem bekend zijn.\n\n5.  Als de persoon *geldige* transacties in het grootboek schrijft, die\n    voldoen aan de regels zoals deze door alle deelnemers zijn opgelegd,\n    krijgen ze een vergoeding.\n\n6.  Iedereen houdt een kopie van het grootboek bij en voegt de\n    transacties toe die door de laatste loterijwinnaar zijn\n    opgeschreven.\n\n7.  We wachten een tijdje zodat de meeste mensen tijd hebben om hun\n    grootboek bij te werken, om vervolgens de loterij opnieuw uit te\n    voeren.\n\nDit systeem is een verbetering. Het is onmogelijk om te weten wie de\ndeelnemers zijn en wie de volgende winnaar zal zijn, waardoor deze\nmethode ongevoelig is voor afpersing.\n\nWe hebben echter nog geen duidelijk antwoord op de vraag hoe we deze\nloterij kunnen uitvoeren zonder dat iemand de leiding heeft, of waarom\nwe erop zouden vertrouwen dat de winnaar eerlijk gaat handelen bij het\nschrijven in het grootboek. In het volgende hoofdstuk zien we hoe we dat\nkunnen oplossen.\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["social-share"],"toc":true,"output-file":"ch02.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.335","share":{"permalink":"https://bitcoinboeken.com/","description":"Leer over bitcoin met de bekendste boeken over bitcoin in het Nederlands.","twitter":true,"facebook":true,"reddit":true,"linkedin":true,"email":true},"theme":"cosmo","toc-title":"Inhoudsopgave","toc-location":"right","fontsize":"1.1em","linestretch":1.7,"number-depth":0,"cap-location":"top"},"extensions":{"book":{"multiFile":true}}},"pdf":{"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":true,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","filters":["social-share"],"toc":true,"number-sections":true,"output-file":"ch02.pdf"},"language":{},"metadata":{"block-headings":true,"share":{"permalink":"https://bitcoinboeken.com/","description":"Leer over bitcoin met de bekendste boeken over bitcoin in het Nederlands.","twitter":true,"facebook":true,"reddit":true,"linkedin":true,"email":true},"documentclass":"scrbook","toc-title":"Inhoudsopgave","number-depth":0,"colorlinks":true,"fontfamily":"Alegreya","geometry":["top=30mm","left=20mm","heightrounded"]},"extensions":{"book":{}}},"epub":{"execute":{"fig-width":5,"fig-height":4,"fig-format":"png","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"epub","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"default-image-extension":"png","to":"epub","filters":["social-share"],"output-file":"ch02.epub"},"language":{},"metadata":{"share":{"permalink":"https://bitcoinboeken.com/","description":"Leer over bitcoin met de bekendste boeken over bitcoin in het Nederlands.","twitter":true,"facebook":true,"reddit":true,"linkedin":true,"email":true},"cover-image":"cover.png"},"extensions":{"book":{}}}}}