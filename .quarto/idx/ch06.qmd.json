{"title":"Forks en 51%-aanvallen","markdown":{"headingText":"Forks en 51%-aanvallen","containsRefs":false,"markdown":"\nIn de begindagen minede Satoshi zijn eerste bitcoins door gebruik te\nmaken van de CPU in zijn computer. Aangezien de moeilijkheid\noorspronkelijk erg laag was, bleek het relatief goedkoop om die munten\nte produceren.\n\nMet tijd, begonnen mensen te sleutelen aan de software om te minen en\nwerd het efficiënter. Uiteindelijk werd software geschreven die gebruik\nmaakte van gespecialiseerde grafische apparatuur (GPU's), gewoonlijk\ngebruikt door *gamers*, om te minen.\n\nMet GPU's werd minen een heel stuk efficiënter. De moeilijkheidsgraad\nging snel omhoog om de grote hoeveelheden *hash-rate* van de GPU's bij\nte benen. Minen met een CPU werd onrendabel.\n\nNa de komst van GPU mining werd de efficientie van miners nog verhoogd\ndoor de product van *Application Specific Integrated Circuits* (ASIC's).\nDeze computerchips doen maar 1 ding: de bitcoin sha256 hash-functie\nuitvoeren. Ze kunnen enkel dit algoritme en bleken opnieuw een orde van\ngrootte meer efficiënt dan GPU's. De grafische kaarten voor gamers\nwerden snel onrendabel om te minen, net zoals gebeurde met CPU's. Iedere\npaar jaar komt een nieuwe generatie ASIC's naar buiten die beter werken\ndan de vorige versies.\n\nDe eerste miners op het netwerk spendeerden slechts enkele centen aan\nelektriciteit om hun bitcoin te produceren. Terwijl de prijs omhoogging,\nen meer miners zich aansluiten bij het netwerk, ging de\nmoeilijkheidsgraad van het minen omhoog en werd het duurder en duurder\nom bitcoins te produceren. Vandaag hangt de prijs rond de \\$8.000 per\nBTC en spenderen miners duizenden dollars per geproduceerde bitcoin.\n\n## Mining pools\n\nEen probleem met bitcoin mining is dat het niet-deterministisch is,\nzoals het rollen met een dobbelsteen. Dit betekent dat je een grote\nhoeveelheid geld kunt uitgeven aan elektriciteit en nooit een geldig\nblok vinden.\n\nIn 2010 werden zogenaamde *mining pools* al populair om het probleem van\nvariabiliteit te verbeteren. Een *mining pool* is een manier om het\nrisico te delen, vergelijkbaar met een verzekering.\n\nAlle miners dragen bij aan een *pool*. Het lijkt alsof ze 1 grote miner\nzijn op het netwerk. Wanneer iemand in die *pool* een geldig blok vindt,\nwordt de beloning gedeeld met iedereen die bijdroeg, proportioneel\nverdeelt volgens de *hash-rate* die ze bijdroegen. Dit stelt ook kleine\nmining-operaties in staat om beloningen te verdienen voor de kleine\nhoeveelheid rekenkracht die zij bijdragen. In ruil voor de dienst die\nzij aanbieden, nemen *pool* een stukje van de beloning.\n\nHet concept van *mining pool* introduceerde enige centralisatie.\nGebruikers sloten zich aan bij de grotere en bekendere diensten. Maar de\ngebruikers van de pools zijn wel eigenaar van hun *hash-rate*. Ze kunnen\nop elk moment veranderen naar een nieuwe *mining pool*.\n\nEr bestaat historisch precedent voor individuele miners die een *pool*\nverlaten omdat die te groot is geworden. In 2014 zat bijna de helft van\nde rekenkracht op het netwerk bij Ghash.io. De miners zagen in hoe\ngecentraliseerd dit werd en gingen vrijwillig over op andere diensten.\n\nHoewel de relatief gecentraliseerde mining pools vandaag een realiteit\nzijn, worden constant verbeteringen voorgesteld om de mining-technologie\nbeter te maken, zoals bijvoorbeeld BetterHash. Met deze verbetering\nzouden individuele miners meer controle hebben over welke transacties ze\nprecies willen minen, zonder hiervoor afhankelijk te zijn van\ncoördinatie van hun *mining pool*.\n\n## 51%-aanvallen\n\nCentralisatie in *mining pools* leidt tot bezorgdheid dat enkele van de\ngrote pools zouden kunnen samenspannen om een 51%-aanval uit te voeren\nop het netwerk. Vandaag hebben de vijf grootste identificeerbare pools\nmeer dan 50% van de totale mining *hash-rate*. Laat ons onderzoeken hoe\nzo'n aanval wordt uitgevoerd en welke gevaren eraan verbonden zijn.\n\nWanneer je net meer dan 50% van de rekenkracht in handen hebt, kan je de\nmeerderheid van de toevoegingen aan het grootboek domineren. Je kan\nimmers de zwaarste ketting produceren, mits je de aanval even kan\nvolhouden. Herinner je dat Nakamoto Consensus stelt dat *nodes* altijd\nde zwaarste cumulative proof-of-work *chain* moeten accepteren die ze\nkennen.\n\nHier is een voorbeeld van een simpele 51%-aanval:\n\n1.  Stel dat heel het netwerk bitcoin hasht aan 1000 hashes per seconde.\n\n2.  Je koopt een heleboel mining hardware en elektriciteit om 2000\n    hashes per seconde te produceren. We hebben nu 66% van de totale\n    *hash-rate* (2000 van de 3000 hashes per seconde).\n\n3.  Je begint een ketting te minen met enkel lege blokken.\n\n4.  Binnen twee weken publiceer je de ketting van lege blokken. Omdat je\n    veel sneller was dan de eerlijke miners, zal jouw versie twee keer\n    zo veel proof-of-work bevatten. De aankondiging van jouw versie op\n    het netwerk zal alle andere nodes doen overgaan op een *reorg*\n    waarin alle transacties uit de laatste 2 weken ongedaan worden\n    gemaakt.\n\nNaast het minen van lege blokken, waardoor de *chain* onbruikbaar wordt,\nis het ook mogelijk om een dubbele-uitgaven aanval uit te voeren:\n\n1.  Stuur bitcoin naar een handelsbeurs\n\n2.  Ruil om naar USD en haal de dollars af.\n\n3.  Op een later tijdstip kan je de *chain* publiceren zonder de\n    transactie naar de handelsbeurs uit stap 1 hierboven.\n\n4.  Je herschreef de geschiedenis van het grootboek en bezit nu zowel de\n    originele bitcoins als de dollars.\n\nDe energieconsumptie van bitcoin's *hash-rate* is ongeveer equivalent\nmet dat van een gemiddeld land. De benodigde hardware en elektriciteit\nverwerven om zo'n aanval uit te voeren is enorm duur. Schattingen tonen\ndat het ongeveer \\$700.000 dollar per uur kost om een 51%-aanval uit te\nvoeren. Die kost blijft snel stijgen. Deze schatting neemt de reactie\nvan eerlijke miners, wat de kost van de aanval nog zou opdrijven, niet\nin rekening.\n\nDaarnaast is ook nog eens zeer moeilijk om een dubbele-uitgaven aanval\nsuccesvol af te ronden zonder vingerafdrukken achter te laten die\nduidelijk maken wie je bent. Tenslotte, je zou een hoeveelheid energie\nvan een gemiddeld land aan het opgebruiken zijn, na miljoenen dollars\naan hardware aan te kopen, en je moet een handelsbeurs vinden waar je\nmiljoenen dollars kan uitcashen om de aanval te doen slagen.\n\nMaar stel dat een kwaadaardige partij, met ongelimiteerde budgetten,\nzoals een overheid, zou beslissen om dit te doen en erin slaagt om de\naanval vol te houden zodat het effect op het netwerk meer dan gewoon wat\noverlast is. Dan nog zou het netwerk in principe kunnen reageren door de\nproof-of-work functie te veranderen (naar iets anders dan sha256).\nHierdoor zou alle bestaande bitcoin mining hardware, die de aanvaller\nook gebruikt, nutteloos worden. Die machines dienen specifiek om sha256\nhashes te doen. Maar het aanpassen van het proof-of-work algoritme moet\nje zien als een laatste redmiddel en alle eerlijke miners zouden\neveneens in de klappen delen. Toch zou het netwerk overleven.\n\nNaast de onwaarschijnlijkheid van de aanval, geeft het hebben van de\nmeerderheid van de *hash-rate* je nog altijd het recht niet om dingen te\ndoen die nog belangrijker zijn:\n\n1.  Je kan geen munten uit het niets creëren die de regels van\n    uitgifteschema schenden. Aangezien dit de consensusregels van de\n    blokbeloning zou overtreden, worden de blokken gewoon verworpen,\n    zelfs al hadden ze genoeg proof-of-work.\n\n2.  Je kan geen munten uitgeven die niet van jou zijn. Het is onmogelijk\n    om een geldige digitale handtekening hiervoor te leveren.\n\nDe nodes die bitcoin accepteren voor betalingen zouden het netwerk\neerlijk houden in het aanzicht van een oneerlijke meerderheid van miners\ndoor simpelweg de regels van bitcoin toe te passen. Aldus is een\n51%-aanval eerder hinderlijk dan een veiligheidsrisico. Waarschijnlijk\nis het *worst-case scenario* hier dat een overheid met een goed gevulde\nportemonnee, bitcoin probeert onbruikbaar te maken. Maar zo'n aanval kan\nniet eeuwig duren. Wanneer bitcoin herstelt van een aanval zoals\nbeschreven, zou het enkel haar veerkracht benadrukken en een nog groter\nprobleem worden voor zij die het willen aanvallen.\n\nHoewel bitcoin tot dusver nog nooit met succes aangevallen is met een\n51%-aanval, hebben we wel voorbeelden van andere *blockchain* die veel\nminder hash-rate hebben die hen beveiligd. In deze gevallen waren de\nbeurzen het slachtoffer van de aanval en verloren ze geld aan munten met\nlage hash-rate die ze in de eerste plaats nooit hadden moeten aanbieden\nop hun platform.\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"ch06.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.335","theme":"cosmo","fontsize":"1.1em","linestretch":1.7},"extensions":{"book":{"multiFile":true}}},"pdf":{"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":true,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","toc":true,"number-sections":true,"output-file":"ch06.pdf"},"language":{},"metadata":{"block-headings":true,"documentclass":"scrbook","toc-title":"Inhoudsopgave","colorlinks":true,"fontfamily":"Alegreya","geometry":["top=30mm","left=20mm","heightrounded"]},"extensions":{"book":{}}},"epub":{"execute":{"fig-width":5,"fig-height":4,"fig-format":"png","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"epub","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"default-image-extension":"png","to":"epub","output-file":"ch06.epub"},"language":{},"metadata":{"cover-image":"cover.png"},"extensions":{"book":{}}}}}