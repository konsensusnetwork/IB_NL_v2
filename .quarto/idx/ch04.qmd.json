{"title":"Mining","markdown":{"headingText":"Mining","containsRefs":false,"markdown":"\nMeedoen aan de proof-of-work loterij om de mogelijkheid tot het\naanpassen van het bitcoin-grootboek te winnen, is beter bekend als\n*minen*. Dit is hoe het werkt:\n\n1.  Iedereen die wil deelnemen, sluit zich aan bij het bitcoinnetwerk\n    door hun computer aan te zetten, de juiste bitcoin-software te\n    draaien en te luisteren naar anderen die hun transacties\n    aankondigen.\n\n2.  Alice kondigt haar voornemen aan om wat munten naar Bob te sturen.\n    De computers op het netwerk roddelen met elkaar om deze transactie\n    naar iedereen op het netwerk te verspreiden.\n\n3.  Alle computers die willen deelnemen aan de loterij starten met het\n    *hashen* van de transacties waar ze over hebben gehoord door\n    willekeurige *nonces* toe te voegen aan de transactielijst en de\n    sha256 *hash*-functie uit te voeren.\n\n4.  Gemiddeld elke tien minuten vindt een computer een hash afgeleid van\n    de transacties die lager is dan het huidige doelnummer en wint\n    daarmee de loterij.\n\n5.  Deze computer maakt zijn winnende getal bekend, evenals de invoer\n    (transacties en nonce) die ze hebben gebruikt om het winnende lot te\n    produceren. Het kan uren gekost hebben om dat te vinden, of een paar\n    minuten. Deze informatie bij elkaar (transacties, nonce en de hash\n    van het proof-of-work) wordt een *blok* genoemd.\n\n6.  Alle andere deelnemers valideren het blok door te controleren of de\n    transacties in het blok samen met de nonce inderdaad hashen tot wat\n    er gedeeld wordt, dat de hash inderdaad lager is dan het doelnummer,\n    dat het blok geen ongeldige transacties bevat én dat de geschiedenis\n    in het blok niet in strijd is met voorgaande blokken.\n\n7.  Iedereen schrijft het blok in zijn kopie van het grootboek en voegt\n    het toe aan de bestaande ketting van blokken, bekend als een\n    *blockchain*.\n\nDat is het in een notendop. We hebben ons eerste blok geproduceerd en\nmogen onze eerste transacties aan onze grootboeken toevoegen.\n\nMisschien heb je in de media de vaak herhaalde bewering gelezen dat\nbitcoin mining het oplossen van ingewikkelde vergelijkingen inhoudt. Nu\nzul je begrijpen dat dit volstrekt onjuist is; in plaats van\nvergelijkingen op te lossen, moet je bij bitcoin mining herhaaldelijk\ngooien met een grote virtuele dobbelsteen om een hash te produceren die\nonder een bepaald doelnummer valt. Het is gewoon een kansspel dat\ndeelnemers dwingt om een bepaalde hoeveelheid elektriciteit te\nverbruiken.\n\n## Hoe worden nieuwe bitcoins gemaakt?\n\nTot nu toe hebben we besproken hoe Alice \\$2 naar Bob kan sturen. We\ngaan vanaf nu stoppen met praten over dollars, want bitcoin kent geen\ndollars. Wat we wel hebben, zijn bitcoins zelf: digitale eenheden die\nwaarde vertegenwoordigen op het bitcoinnetwerk.\n\nOm bij ons voorbeeld te blijven, kunnen we zeggen dat Alice 2 bitcoins\nnaar Bob stuurt door aan te kondigen dat ze haar munten, die op haar\nrekening staan, naar die van Bob overzet. Vervolgens wint iemand de\nproof-of-work loterij, en wordt haar aangekondigde transactie toegevoegd\naan het grootboek.\n\nMaar waar kwamen die 2 bitcoins van Alice oorspronkelijk vandaan? Hoe\nging bitcoin van start en hoe verwierf iemand ooit munten voordat er\nmarktplaatsen waren om ze te kopen met traditionele fiatvaluta zoals\ndollars of euro's?\n\nToen Satoshi bitcoin ontwierp, had hij ervoor kunnen kiezen om een\ndatabase te maken die alle 21 miljoen munten aan hem toewees en\nvervolgens iedereen te vragen ze van hem te kopen. Echter zou er weinig\nreden zijn voor anderen om waarde toe te kennen aan een systeem waarin\néén enkeling alle waarde bezat. Hij kon een register gemaakt hebben waar\nmensen konden intekenen met een e-mailadres om kans te maken op enkele\nmunten. Maar een registratiesysteem zou vatbaar zijn aan een zogenaamde\n*Sybil-aanval*, aangezien het quasi gratis is om miljoenen\ne-mailadressen aan te maken.[^14]\n\nSatoshi koos uiteindelijk om de nieuwe munten te laten genereren door\nhet proces van minen, oftewel de deelname aan de proof-of-work loterij\nom het recht te verkrijgen in het grootboek te schrijven. Wanneer je een\ngrote hoeveelheid energie gebruikt en het winnende getal van het\nvolgende geldige blok vindt, krijg je het recht om de transacties die\nbij jou bekend zijn toe te voegen aan het grootboek. Daarbovenop mag je\nook een speciale transactie toevoegen aan het blok die we een\n*coinbase*-transactie noemen. Zo'n transactie zegt: 12,5 bitcoin werden\ngemaakt en toegekend aan Marie de Miner om haar te compenseren voor de\nenergie die gebruikt werd om het blok te vinden.\n\nDit is hoe nieuwe bitcoins gemaakt worden. Met dit proces is iedereen\nter wereld in staat om hun eigen munten te vergaren zonder tussenkomst\nvan een centrale autoriteit én zonder hun identiteit bekend te moeten\nmaken. De enige vereiste is dat ze genoeg willen betalen voor de\nelektriciteit die nodig is om mee te doen met de loterij. Dit maakt\nbitcoin's uitgifte resistent tegen *sybil*-aanvallen. Wie munten wil,\nzal energie moeten verbruiken en iets moeten betalen om ze te maken.\n\n## De blokbeloning\n\nDe persoon die de loterij wint, mag zichzelf enkele vers gemaakte munten\ntoekennen. Maar waarom is de beloning 12,5 bitcoins en niet 1000? Waarom\nkan niemand valsspelen en zichzelf een willekeurig bedrag toekennen?\n\nBitcoin is een systeem van gedistribueerde consensus. Dit betekent dat\niedereen akkoord moet gaan met wat geldig is en wat niet. Dat kan door\nsoftware op je computer te draaien die een bekende set van regels\nafdwingt. Deze regels staan bekend als de consensusregels van bitcoin.\nWanneer een miner een nieuw blok vindt, wordt alles tegen de\nconsensusregels afgewogen. Wanneer het blok geldig blijkt te zijn,\nschrijft iedereen het in hun grootboek en wordt het geaccepteerd als\nwaarheid. Indien niet, dan wordt het blok verworpen.\n\nHoewel de volledige lijst van consensusregels vrij complex is, kunnen we\nde belangrijkste hieronder opsommen:\n\n-   Een geldig blok mag een specifieke hoeveelheid nieuwe munten aan het\n    netwerk toevoegen, zolang het voldoet aan de regels van het\n    uitgifteschema wat vastgelegd is in de software.\n\n-   Transacties moeten geldige handtekeningen hebben die aangeven dat de\n    eigenaar het verzenden daadwerkelijk goedgekeurd heeft.\n\n-   Transacties die munten proberen uitgeven die al eerder uitgegeven\n    werden, kunnen onder geen geval plaatsvinden.\n\n-   De hoeveelheid data in het blok mag een specifieke limiet niet\n    overschrijden.\n\n-   De proof-of-work hash van het blok moet kleiner zijn dan het huidige\n    doelnummer, waardoor onbetwistbaar aangetoond wordt dat dit blok tot\n    stand kwam door een bepaalde hoeveelheid elektriciteit te gebruiken.\n\nIndien Marie een blok vindt en beslist om zichzelf een beetje extra te\ngeven, dan zullen de computers van de overige deelnemers dit blok\nafwijzen en als ongeldig beschouwen. Dit komt omdat de bitcoin-software\ndie iedereen draait een stukje code bevat dat zegt: \"de huidige\nblokbeloning is precies 12,5 bitcoins. Als je een blok ziet waarin\niemand meer dat dit bedrag toekent, verwerp het dan.\"\n\nAls Marie probeert vals te spelen en een ongeldig blok produceert, dan\nkomt het blok in niemands grootboek terecht en zal ze simpelweg veel\nelektriciteit verspild hebben om een vervalsing te produceren die\nniemand wil. Dit geeft bitcoin een *onvervalsbare kostbaarheid*, een\nterm die werd geïntroduceerd door Nick Szabo in zijn esssay Shelling\nOut. Het is vrij makkelijk te begrijpen dat geld wat makkelijk te\nvervalsen is, nooit daadwerkelijk nuttig kan zijn als geld. Het is\nonmogelijk om bitcoin te vervalsen omdat iedere munt op echtheid te\ncontroleren valt met een simpele, wiskundige test.\n\nSatoshi ontgon het eerste genesis blok, wat de eerste bitcoins ooit\nproduceerde. De code is *open source* en dus kan iedereen een kijkje\nonder de motorkap nemen om te zien of er niets verkeerd loopt. Maar\nzelfs Satoshi moest miljarden berekeningen doen en meespelen met de\nproof-of-work loterij om die eerste blokken te vinden. Op geen enkele\nmanier kon hij een vervalsing produceren door te liegen over de energie\ndie hij nodig had om een winnende oplossing te vinden. En dat terwijl\nhij de ontwerper van het systeem was.\n\nIedereen die zich daarna bij het netwerk aansloot kon controleren dat\nzijn gevonden oplossingen voldeden aan de vereisten. Door ze naast het\ninitiële doelnummer en transactiedata te leggen, blijkt overduidelijk\ndat een bepaalde hoeveelheid energie gebruikt werd om een statistisch\nzeldzaam doelnummer te vinden. Stel je voor dat het mogelijk is om met\ndiezelfde precisie en regelmaat te controleren hoe fiatvaluta in het\ntraditionele bankensysteem tot stand komt.\n\n## De halvering\n\nHet proces van minen produceert nieuwe bitcoins. Maar Satoshi wou een\nsysteem waarin het onmogelijk was om de waarde van de munt te\ndevalueren. Hij wou niet dat het monetaire aanbod tot in het oneindige\nzou blijven stijgen. In plaats daarvan, ontwierp hij een uitgifteschema\ndat snel begon en geleidelijk afneemt tot uiteindelijk geen nieuwe\nmunten meer zullen worden geproduceerd.\n\nIn het begin was de beloning voor een blok 50 bitcoin en dat is hoeveel\nSatoshi ontving voor zijn allereerste ontgonnen blok. Net zozeer kregen\nalle andere deelnemers die zich aansloten bij het netwerk in de\nbegindagen voor elke gevonden blok 50 bitcoin.\n\nDe bitcoin-software dwingt iedere vier jaar een halvering van de\nblokbeloning af. De periode is gebaseerd op het aantal blokken in plaats\nvan een bepaalde periode van tijd, maar omdat blokken ongeveer elke tien\nminuten worden geproduceerd, maakt dit in werkelijkheid weinig verschil.\nIn 2008 was de blokbeloning 50 BTC, in 2012 was het 25 BTC, in 2016\n12,5. Vandaag, op 8 juni 2019, zijn al 579.856 blokken ontgonnen sinds\nhet begin van bitcoin en is de beloning 12,5 BTC per blok.\n\nBinnen 50.144 blokken, ongeveer in mei 2020, zal de beloning verlaagd\nworden tot 6,25 BTC per blok. De jaarlijkse toename van het aanbod wordt\ndan ongeveer 1,8%. Na nog eens 12 jaar, 3 halveringen later, zullen 99%\nvan alle bitcoins in circulatie zijn en krijgen miners nog minder dan 1\nbitcoin per gevonden blok. Je kan de voortgang van de halveringen volgen\nop <https://bitcoinblockhalf.com>.\n\n<figure id=\"fig6\">\n<img src=\"images/fig6.png\" />\n<figcaption><span><em>Het gecontroleerde monetaire tijdschema van\nbitcoin kan door iedereen worden bevestigd.</em></span></figcaption>\n</figure>\n\nUiteindelijk, rond het jaar 2140, zal de blokbeloning volledig wegvallen\nen moeten miners genoegen nemen met transactievergoedingen van de\ngebruikers als compensatie voor hun werk.\n\nDe blokbeloningen, en het uitgifteschema in het algemeen, worden\nafgedwongen in de bitcoin-software die, zoals eerder gesteld, volledig\n*open source* is en dus door iedereen volledig gevalideerd kan worden.\nEen blok produceren dat niet voldoet aan de regels zal door niemand met\ndezelfde software geaccepteerd worden.\n\n## Beheersen van de uitgifte en het blokinterval\n\nHet minen van bitcoin vereist computers en elektriciteit. Dus hoe meer\ncomputers en elektriciteit je ter beschikking hebt, hoe groter de kans\nis dat jij een winnend lot weet te vinden. Stel, het netwerk bestaat uit\n100 computers met gelijke rekenkracht en jij bezit daar 10 van. Dit\nbetekent dat je in ongeveer 10% van de gevallen een winnende oplossing\nzal vinden. Maar mining is een proces waar geluk en willekeur mee\ngemoeid gaat. Het is dus theoretisch gezien mogelijk dat er uren of\ndagen voorbijgaan zonder dat je een winnend lot vind.\n\nIn het vorige deel hebben we uitgelegd dat miners zichzelf niet\nsimpelweg een arbitraire blokbeloning kunnen toekennen. Die zouden door\nandere *nodes* verworpen worden. Maar wat als ze een heleboel energie\ngebruikten om het miningproces sneller te laten verlopen en zo meer\nbitcoins te verwerven? Dit zou in strijd zijn met het opzet in het\nontwerp van bitcoin, namelijk dat het uitgifteschema van tevoren bekend\nzou moeten zijn.\n\nLaten we opnieuw het eerder gegeven voorbeeld nemen: er zijn 1000\nmogelijke hashes en ons doelnummer is 100. In 10% van de gevallen zullen\nwe een getal vinden dat kleiner is dan 100 en een geldig blok vinden.\n\nStel dat het 1 seconde duurt om elke hash te berekenen. Als we iedere\nseconde \"onze dobbelsteen rollen\" door de huidige transacties en onze\nlukrake *nonce* te hashen, vinden we in 10% van de keren een getal dat\nkleiner is dan het doelnummer. We verwachten dus dat het ons gemiddeld\n10 seconden vergt om een geldige hash te vinden.\n\nWat gebeurt er wanneer 2 computers meedoen aan de loterij? Ze hashen dan\ndubbel zo snel en verwachten een geldige hash iedere 5 seconden. Wat als\n10 computers meedoen? Elk van hen kan ongeveer iedere seconde een\nwinnende oplossing vinden.\n\nHet probleem is dus het volgende: als meer mensen meedoen, worden\nblokken te snel geproduceerd. Dit leidt tot twee uitkomsten die we niet\nwillen:\n\n1.  Het is niet meer mogelijk om een vooraf vastgesteld uitgiftescheme\n    aan te houden. We willen hiervoor ieder uur een relatief consistent\n    aantal bitcoins in circulatie zien komen om te zorgen dat het proces\n    tot in het jaar 2140 duurt, en niet eerder ten einde komt.\n\n2.  Het creëert problemen op het netwerk: wanneer blokken te snel\n    gevonden worden en geen tijd hebben om de rest van het netwerk te\n    bereiken voordat een volgend blok gevonden wordt, kunnen we niet tot\n    consensus komen over de lineaire geschiedenis van transacties.\n    Verschillende miners zouden dan transacties in hun blokken gestopt\n    kunnen hebben, die al uitgegeven werden in een vorig blok waar ze\n    nog niet van op de hoogte waren.\n\nAls minder mensen minen dan hebben we het tegenovergestelde:\n\n1.  Nieuwe bitcoins worden te traag uitgegeven waardoor het\n    uitgifteschema niet klopt.\n\n2.  Het systeem wordt onbruikbaar omdat je soms uren, dagen of langer\n    zal moeten wachten om je transacties in het grootboek te krijgen.\n\nHet totale aantal hashes per seconde van alle miners op het netwerk\nnoemen we de *hash-rate*.\n\n<figure id=\"fig7\">\n<img src=\"images/fig7.png\" />\n<figcaption><span><em>De tijd tussen blokken varieert afhankelijk van de\nhash-rate die komt en gaat, evenals willekeurige\nkans.</em></span></figcaption>\n</figure>\n\n## Moeilijkheidsaanpassing: consensus over het doelnummer\n\nAangezien bitcoin een vrijwillig en permissieloos systeem is waar mensen\ndeel aan kunnen nemen zoals zij willen, zonder dat iemand de leiding\nheeft, zal het aantal miners op het netwerk sterk schommelen. We hebben\neen manier nodig om de productie van blokken stabiel te houden in plaats\nvan telkens een versnelling of vertraging in productie te zien wanneer\nminers zich aansluiten of verdwijnen.\n\nHoe kunnen we het moeilijker maken om geldige hashes te vinden als meer\nspelers meedoen aan de loterij en makkelijker wanneer spelers weggaan?\nOp die manier zouden we de uitgifte en blokintervallen stabiel kunnen\nhouden.\n\nHerinner je dat het minen van bitcoin een loterij is waarin je een\nwillekeurig getal moet vinden dat kleiner is dan het doelnummer.\n\n<figure id=\"fig8\">\n<img src=\"images/fig5.png\" />\n<figcaption><span><em>We proberen deze kleine ruimte te raken. Het\naantal mogelijke uitkomsten is extreem groot, dus het zal heel lang\nduren om daar te komen door willekeurige worpen van de\ndobbelsteen.</em></span></figcaption>\n</figure>\n\nBitcoin lost dit probleem op door middel van een *aanpassing van de\nmoeilijkheidgraads*. Omdat iedereen dezelfde code draait die dezelfde\nregels afdwingt, én iedereen een volledige kopie heeft van de\ntransactiegeschiedenis, kan iedereen onafhankelijk berekenen hoe snel\nblokken op dat moment geproduceerd worden.\n\nTelkens wanneer we 2016 blokken geproduceerd hebben (ongeveer 2\nweken)[^15], analyseren we de snelheid van uitgifte over de afgelopen\nperiode. We kijken hoeveel tijd nodig was om die 2016 blokken te\nproduceren en passen vervolgens passen het doelnummer aan om de\nproductie van blokken te versnellen of te vertragen.\n\nIedereen neemt de laatste 2016 blokken en deelt ze door de tijd die\ngemiddeld nodig was om te ze creëren. Was het gemiddelde meer dan 10\nminuten? Dan gaan we te traag. Lag het gemiddelde onder de 10 minuten?\nDan gaan we te snel.\n\nWe kunnen nu het doelnummer aanpassen zodat het groter of kleiner is,\nproportioneel met hoe traag of snel we gaan, om te zorgen dat we in lijn\nblijven met het afgesproken interval van 10 minuten.\n\nHet doelnummer kan een groter getal worden, waardoor een groter bereik\nvan hashes een geldige oplossing wordt. Hierdoor wordt de kans om een\nwinnende hash te vinden voor de miners groter en hoeven ze minder\nenergie te gebruiken om een blok te vinden. Dit heet *de\nmoeilijkheidsgraad verlagen*.\n\n<figure id=\"fig9\">\n<img src=\"images/fig8.png\" />\n<figcaption><span><em>Het verhogen van het doel vergroot de geldige\nruimte, waardoor het waarschijnlijker wordt om in minder pogingen een\njuiste oplossing te vinden. Daardoor wordt het goedkoper in verbrande\nenergie.</em></span></figcaption>\n</figure>\n\nAnderzijds, kunnen we het doelnummer kleiner maken zodat er minder\nhashes geldig zijn en miners meer energie moeten spenderen om een blok\nte vinden. Dit heet *de moeilijkheidsgraad verhogen*.\n\nDit betekent dat we voor elke periode van 2016 blokken precies weten wat\nhet doelnummer is. Het geeft ons de magische grens waarbinnen een hash\nvan de proof-of-work moet vallen om een winnend lot te bemachtigen,\nbinnen die periode.\n\nDe aanpassingen van de moeilijkheidsgraad en het doelnummer is misschien\nwel de belangrijkste innovatie van bitcoin. Het stelt iedereen in staat\nom onafhankelijk de lotnummers te verifiëren, die op hun beurt weer\ngebaseerd zijn op een doelnummer dat ook onafhankelijk te verifiëren is.\nHierdoor kunnen we een loterij spelen zonder dat iemand ons de winnende\ncombinatie hoeft te vertellen.\n\nIn Figuur [6.5](#fig10){reference-type=\"ref\" reference=\"fig10\"} zie je\nde *hash-rate* (lijn) en de moeilijkheidsgraad (staven) doorheen de\ntijd. De moeilijkheid wordt iedere 2016 blokken aangepast en lijkt een\nbeetje op een trap. Telkens wanneer de hash-rate boven de moeilijkheid\nuitstijgt, zie je dat de moeilijkheidsgraad stijgt om bij te benen.\nWanneer de hash-rate zakt, zoals tussen oktober en december 2018, zakt\nook de moeilijkheidsgraad. De aanpassing van de moeilijkheidsgraad volgt\naltijd wat de hash-rate doet met een vertraging van 2016 blokken (twee\nweken).\n\n<figure id=\"fig10\">\n<img src=\"images/fig10.png\" />\n<figcaption><span><em>Hash-snelheid versus\nmoeilijkheid.</em></span></figcaption>\n</figure>\n\nOmdat er een vertraging van 2016 blokken op de aanpassing zit, is het\nmogelijk dat grote pieken omhoog of omlaag in hash-rate leiden tot een\nover- of onderproductie van bitcoins tijdens dat interval en licht\nafgeweken wordt van het uitgifteschema.\n\nHet verhogen van de hash-rate gaat gepaard met de productie van een\ngrote hoeveelheid nieuwe hardware, waardoor pieken relatief\nongebruikelijk zijn en niet al te veel impact hebben. Het effect van\niedere piek, omhoog of omlaag, zal beperkt blijven tot dat interval van\n2016 blokken. Na de volgende aanpassing komen we opnieuw bij een\ngemiddelde van 10 minuten per blok.\n\n## Hash-rate en de dollarwaarde van bitcoin\n\nBitcoin herberekent de moeilijkheidsgraad automatisch op basis van alle\nrekenkracht van de loterijspelers. Dit zijn de miners die energie\nverbruiken om te hashen. Op die manier raakt de echte wereld vervlochten\nmet onze digitale wereld. De prijs van bitcoin, de prijs van hardware en\nenergie en de moeilijkheid van het doelnummer creëren\nfeedback-koppelingen:\n\n1.  Speculanten kopen bitcoin omdat ze denken dat de prijs hoger gaat,\n    waardoor ze de prijs opdrijven tot \\$X.\n\n2.  Miners verbruiken tot \\$X aan energie en hardware om bitcoins te\n    verdienen.\n\n3.  Een grote vraag van kopers duwt de prijs omhoog en leidt tot meer\n    miners die aardig verdienen aan hun activiteit.\n\n4.  Meer miners betekent meer hash-rate en meer verbruikte energie om\n    bitcoin te produceren. Het netwerk wordt nog sterker beveiligd. De\n    kopers worden gerustgesteld door de veiligheid van het netwerk en\n    drijven de prijs soms nog verder omhoog.\n\n5.  Na 2016 blokken gaat de moeilijkheidsgraad omhoog door de\n    aanwezigheid van meer hash-rate.\n\n6.  Een hogere moeilijkheid betekent een lager doelnummer. De miners\n    vinden nu minder vaak blokken waardoor sommigen meer dan \\$X\n    spenderen in kosten om een bitcoin te minen.\n\n7.  Voor sommige miners blijkt het niet meer interessant om te minen,\n    omdat ze meer energie verbruiken dan de winst die hun activiteit\n    oplevert wanneer ze hun bitcoin verkopen. Ze leggen hun machines af\n    en de hash-rate op het netwerk gaat terug omlaag.\n\n8.  De volgende 2016 blokken passeren. De moeilijkheid wordt opnieuw\n    berekend en aangezien sommige miners offline gingen, wordt het deze\n    keer makkelijker. Het doelnummer gaat omhoog.\n\n9.  De lagere moeilijkheid betekent dat miners, die voorheen onrendabel\n    waren, hun machines terug aanzetten of dat nieuwe miners op het\n    toneel verschijnen.\n\n10. Ga terug naar 1.\n\nIn een neerwaartse markt kan de cyclus in de andere richting gaan.\nGebruikers van het netwerk dumpen dan hun munten, de prijs gaat omlaag\nen miners worden onrendabel.\n\nHet algoritme voor de aanpassing van de moeilijkheidsgraad zorgt dat er\naltijd een evenwicht wordt gevonden tussen de prijs en de hoeveelheid\nhash-rate die aanwezig is op het netwerk. Zelfs als de prijs drastisch\nzou zakken en de helft van de huidige hash-rate uit het netwerk zou\nduwen, dan zou de volgende aanpassing het opnieuw rendabel maken op een\nnieuw evenwichtsniveau.\n\nDe aard van de moeilijkheidsaanpassing duwt inefficiënte miners eruit\nten voordele van degenen die werken met de goedkoopst mogelijke energie\nen met de laagste totale operationele kosten. Na verloop van tijd dwingt\nhet bitcoin miners richting afgelegen hoeken op de planeet. Ze gebruiken\nenergiebronnen die onderbenut of volledig onontgonnen zijn. Een rapport\nvan CoinShares uit 2019 schat dat ongeveer 75% van de bitcoin miners\nhernieuwbare energie gebruikt.[^16]\n\nDe laatste jaren ging de prijs pijlsnel omhoog, net als de totale\nhash-rate. Hoe hoger de hash-rate, hoe moeilijker het is om het netwerk\naan te vallen. Om te bepalen wat in het grootboek komt, moet je ten\nminste evenveel energie en hardware beheren als de helft van het hele\nnetwerk. Op vandaag wordt geschat dat de elektriciteit die gebruikt\nwordt door bitcoin miners equivalent is met het verbruik van een land\nvan gemiddelde grootte.\n\n## Vergoedingen en het einde van blokbeloning\n\nHoe zorgen we dat miners nog altijd een drijfveer hebben om energie te\nspenderen om het netwerk te beveiligen wanneer de blokbeloning\nuiteindelijk afloopt? Het antwoord zijn de vergoedingen voor\ntransacties. Met tijd vervangen de vergoedingen de beloning en ze geven\nde miners ook de drijfveer om transacties daadwerkelijk in een blok te\nplaatsen. Anders zouden ze perfect lege blokken kunnen produceren en\nenkel de blokbeloning opstrijken.\n\nDe vergoedingen worden bepaald op een vrije markt waar gebruikers bieden\nvoor de schaarse ruimte binnen een blok. Gebruikers die transacties\nversturen geven aan hoeveel vergoeding ze willen betalen aan miners. Op\nhun beurt kunnen de miners de transactie al dan niet insluiten in het\nvolgende blok, afhankelijk van de vergoedingen. Wanneer slechts weinig\ntransacties in het volgende blok willen, zijn de vergoedingen laag en is\ner weinig competitie. Wanneer de ruimte in de blokken opgevuld raakt,\ngaan gebruikers meer bereid zijn om een hogere vergoeding te betalen om\nhun transactie sneller bevestigd te zien (in de volgende blok). Wie niet\nwil betalen kan zijn transactievergoeding laag zetten, maar moet dan\nrekening houden met een langere wachttijd.\n\nIn traditionele financiële systemen zijn vergoedingen doorgaans\ngebaseerd op een percentage van het bedrag van de transactie. In bitcoin\nis de waarde van de transfer niet relevant voor de vergoeding. In plaats\ndaarvan, zijn vergoedingen proportioneel met de schaarse grondstof die\nze consumeren: *blokruimte*. De vergoedingen worden gemeten in satoshi's\nper byte opgebruikte ruimte in een blok.[^17] Op die manier kan het zijn\ndat een transactie van een miljoen bitcoin tussen twee personen\ngoedkoper is qua vergoeding dan een transactie die 1 BTC splits in 10\nontvangers aangezien die laatste meer ruimte zal innemen in de\ntransactielijst.\n\nTijdens periodes waarin bitcoin enorm in trek was, zoals de grote\nstierenmarkt van 2017, gingen transactievergoedingen door het dak.\nSindsdien zijn een aantal nieuwe functies geïmplementeerd die het\nprobleem van hoge transactiekosten op het netwerk verlichten.\n\nEen van die aanpassingen is Segregated Witness. Deze aanpassing zorgt\nvoor een andere voorstelling van de data in blokken. Transacties die\ngebruik maken van die upgrade kunnen meer dan de originele 1MB aan\nblokruimte gebruiken (via een aantal slimme trucs die niet verder\ntoegelicht worden in dit boek).\n\nNog iets dat bijdraagt aan het verlagen van de hoge transactiekosten is\n*batching*. Grote handelsbeurzen en -platformen in het ecosysteem\nbegonnen met het bundelen van transacties voor verschillende gebruikers\nin één: in tegenstelling tot traditionele betalingen via de bank of\nPayPal, die altijd geld van één persoon naar een andere sturen, kan een\nbitcointransactie een groot aantal inputs combineren en een groot aantal\noutputs produceren. Een beurs die bitcoin wil versturen om uit te\nbetalen aan 100 verschillende gebruikers kan dat dus perfect doen in een\nenkele transactie. Op die manier wordt schaarse blokruimte veel\nefficiënter gebruikt. Wat ogenschijnlijk slechts enkele transacties per\nseconde zijn, kunnen in realiteit perfect duizenden transacties\ninhouden.\n\nMet *SegWit* en *batching* komen we al een heel eind om de vraag naar\nblokruimte te verlagen. Verdere verbeteringen zullen het gebruik van\nblokruimte nog efficiënter maken. Niettemin zal er opnieuw een dag komen\ndat transactievergoedingen terug oplopen en blokken door de grote vraag\nnaar blokruimte weer voller en voller raken.\n\nWe hebben nu bijna alle aspecten van bitcoin onder de loep genomen:\n\n1.  Centrale bank vervangen door een gedistribueerd grootboek.\n\n2.  Een loterij opgezet om te bepalen wie in het grootboek mag\n    schrijven.\n\n3.  Spelers van de loterij worden verplicht om energie te gebruiken om\n    lotjes te bemachtigen (door te hashen). Het is voor iedereen\n    eenvoudig om een winnend lot te verifiëren door de hash naast ons\n    eigen, onafhankelijk bepaald, doelnummer te leggen.\n\n4.  Duidelijke regels voor de deelnemers: wie de regels niet volgt, zal\n    niet geaccepteerd worden. Hun blok met beloning in de zogenaamde\n    *coinbase*-transactie wordt dan verworpen en ze ontvangen geen\n    bitcoin. Op die manier ontmoedigen we valsspelen en bieden we een\n    economische stimulans om de regels te volgen.\n\n5.  Controle over de timing en selectie van het doelnummer voor de\n    loterij door iedereen te laten berekenen wat het doelnummer moet\n    zijn op basis van vastgelegde regels in de software en de\n    geschiedenis van de laatste 2016 blokken.\n\n6.  Handhaven van het uitgifteschema door moeilijkheidsgraad aan te\n    passen als gevolg van een hogere of lagere hash-rate.\n\n7.  Gebruik van *open source* code om ervoor te zorgen dat iedereen voor\n    zichzelf kan verifiëren dat zij dezelfde regels hanteerden\n    betreffende geldigheid van transacties, blokbeloning en\n    moeilijkheidsaanpassing.\n\nGeen centrale autoriteit meer. We hebben nu een volledig gedistribueerd\nen decentraal systeem. Dat is bijna het volledige plaatje. Eén probleem\nrest ons nog. Wanneer een nieuwe deelnemer aansluit bij het netwerk en\neen kopie van het grootboek opvraagt, kunnen ze van verschillende\n*nodes* afwijkende geschiedenissen ontvangen. Hoe zorgen we voor een\nenkele, lineaire geschiedenis en hoe voorkomen we dat miners het\nverleden herschrijven?\n\n[^14]: Een Sybil-aanval is een aanval waarin een deelnemer aan een\n    bepaald netwerk een groot aantal pseudonieme addressen aanmaakt om\n    een grote hoeveelheid invloed in het netwerk te vergaren; vernoemd\n    naar Sybil, een boek over een vrouw met een dissociatieve\n    identiteitsstoornis\n\n[^15]: De aanpassingsperiode van 2016 blokken is op basis van het\n    beoogde blokinterval van 10 minuten; 10 minuten x 2016 blokken =\n    twee weken. Het blokinterval werd arbitrair vastgesteld door Satoshi\n    om groot genoeg te zijn zodat de meeste nodes kunnen op de hoogte\n    zijn van de laatste blok. De periode van twee weken is ook ietwat\n    arbitrair gekozen, maar is ontworpen om te voorkomen dat het spel\n    belazerd wordt door te snelle achtereenvolgende aanpassingen in de\n    hash-rate.\n\n[^16]: Lees meer over de laatste stand van zaken betreffende mining op\n    [https://coinshares.com/research/bitcoin-mining-network-june-2019\n    ](https://coinshares.com/research/bitcoin-mining-network-june-2019 )\n\n[^17]: Een byte is 8 bits."},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["social-share"],"toc":true,"output-file":"ch04.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.335","share":{"permalink":"https://bitcoinboeken.com/","description":"Leer over bitcoin met de bekendste boeken over bitcoin in het Nederlands.","twitter":true,"facebook":true,"reddit":true,"linkedin":true,"email":true},"theme":"cosmo","toc-title":"Inhoudsopgave","toc-location":"right","fontsize":"1.1em","linestretch":1.7,"number-depth":0,"cap-location":"top"},"extensions":{"book":{"multiFile":true}}},"pdf":{"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":true,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","filters":["social-share"],"toc":true,"number-sections":true,"output-file":"ch04.pdf"},"language":{},"metadata":{"block-headings":true,"share":{"permalink":"https://bitcoinboeken.com/","description":"Leer over bitcoin met de bekendste boeken over bitcoin in het Nederlands.","twitter":true,"facebook":true,"reddit":true,"linkedin":true,"email":true},"documentclass":"scrbook","toc-title":"Inhoudsopgave","number-depth":0,"colorlinks":true,"fontfamily":"Alegreya","geometry":["top=30mm","left=20mm","heightrounded"]},"extensions":{"book":{}}},"epub":{"execute":{"fig-width":5,"fig-height":4,"fig-format":"png","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"epub","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"default-image-extension":"png","to":"epub","filters":["social-share"],"output-file":"ch04.epub"},"language":{},"metadata":{"share":{"permalink":"https://bitcoinboeken.com/","description":"Leer over bitcoin met de bekendste boeken over bitcoin in het Nederlands.","twitter":true,"facebook":true,"reddit":true,"linkedin":true,"email":true},"cover-image":"cover.png"},"extensions":{"book":{}}}}}